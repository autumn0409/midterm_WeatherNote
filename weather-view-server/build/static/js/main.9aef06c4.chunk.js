(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){},102:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(22),c=n.n(o),i=n(21),s=n(45),l=n(17),u=n(11),d=n(10),p=n(14),m=n(12),h=n(13),f=n(5),E=(n(61),function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"weather-display ".concat(this.props.masking?"masking":"")},r.a.createElement("img",{src:"images/w-".concat(this.props.group,".png"),alt:""}),r.a.createElement("p",{className:"description"},"".concat(this.props.day,": ").concat(this.props.description)),r.a.createElement("h1",{className:"temp"},r.a.createElement("span",{className:"display-3"},this.props.temp.toFixed(0),"\xba"),"\xa0","metric"===this.props.unit?"C":"F"))}}]),t}(r.a.Component)),g=(n(62),function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,n=e.masking,a=e.list;return r.a.createElement("div",{className:"weather-table ".concat(n?"masking":"")},r.a.createElement("div",{className:"d-flex justify-content-around"},a.map(function(e,n){return r.a.createElement("div",{key:e.ts,className:n>2?"hidden-xs-down":""},r.a.createElement("div",{className:"day"},t.weekDays[new Date(1e3*e.ts).getDay()]),r.a.createElement("i",{className:"owf owf-".concat(e.code)}),r.a.createElement("span",{className:"weather"},r.a.createElement("span",{className:"max-temp"},e.maxTemp.toFixed(0),"\xba"),r.a.createElement("span",{className:"min-temp"},e.minTemp.toFixed(0),"\xba")))})))}}]),t}(r.a.Component));g.weekDays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var O=n(103),T=n(104),v=n(111),b=n(105),N=n(106),_=n(107),y=n(51),R=n(15),A=n.n(R),j="36978c6550efee0e27e50850cc57adda",C=function(e){var t="na";return 200<=e&&e<300?t="thunderstorm":300<=e&&e<400?t="drizzle":500<=e&&e<600?t="rain":600<=e&&e<700?t="snow":700<=e&&e<800?t="atmosphere":800===e?t="clear":801<=e&&e<900&&(t="clouds"),t},w="http://api.openweathermap.org/data/2.5/weather?appid=".concat(j),S=A.a.CancelToken.source();var k="http://api.openweathermap.org/data/2.5/forecast/daily?appid=".concat(j,"&cnt=6"),D=A.a.CancelToken.source(),M="https://maps.googleapis.com/maps/api/geocode/json?key=".concat("AIzaSyDrQpacyuBhAAB5TFobrhKWyk7rugcEOfw"),G=A.a.CancelToken.source(),L=function(){return{type:"@WEATHER_FORM/TOGGLE_FORM"}},F=function(e){return{type:"@WEATHER_FORM/INPUT",value:e}},U=function(){return{type:"@WEATHER_FORM/TOGGLE_TEMP"}},I=function(e){return{type:"@WEATHER_FORM/SELECT_UNIT",unit:e}},x=function(e,t){return function(n,a){n({type:"@MASKING/MASK_BG"});var r=W(e,a).then(function(e){return function(e){var t="".concat(M,"&address=").concat(e);return console.log("Making request to ".concat(t)),A.a.get(t,{cancelToken:G.token}).then(function(t){if(t.data.error_message)throw new Error(t.data.error_message);if("ZERO_RESULTS"===t.data.status)throw new Error("There's no result for ".concat(e));return{pos:{lat:t.data.results[0].geometry.location.lat,lon:t.data.results[0].geometry.location.lng},address:t.data.results[0].formatted_address}}).catch(function(e){if(!A.a.isCancel(e))throw e;console.error(e.message,e)})}(e)}).then(function(e){var t=e.pos,a=e.address;return n(function(e){return{type:"@ADDRESS/SET_ADDRESS",address:e}}(a)),n({type:"@LOACTION/SET_LOCATION",location:t}),t}),o=r.then(function(e){return n({type:"@CURRENT_WEATHER/START_GET_CURRENT_WEATHER"}),function(e,t){var n="".concat(w,"&lat=").concat(e.lat,"&lon=").concat(e.lon,"&units=").concat(t);return console.log("Making request to: ".concat(n)),A.a.get(n,{cancelToken:S.token}).then(function(e){if(e.data.cod&&e.data.message)throw new Error(e.data.message);return{code:e.data.weather[0].id,group:C(e.data.weather[0].id),description:e.data.weather[0].description,temp:e.data.main.temp,unit:t}}).catch(function(e){if(!A.a.isCancel(e))throw e;console.error(e.message,e)})}(e,t)}).then(function(e){var t=e.code,a=e.group,r=e.description,o=e.temp;n(function(e,t,n,a){return{type:"@CURRENT_WEATHER/END_GET_CURRENT_WEATHER",code:e,group:t,description:n,temp:a}}(t,a,r,o))}).catch(function(e){console.error("Error getting current weather",e),n({type:"@CURRENT_WEATHER/RESET_CURRENT_WEATHER"}),n({type:"@MASKING/UNMASK_BG"})}),c=r.then(function(e){return n({type:"@FORECAST/START_GET_FORECAST"}),function(e,t){var n="".concat(k,"&lat=").concat(e.lat,"&lon=").concat(e.lon,"&units=").concat(t);return console.log("Making request to: ".concat(n)),A.a.get(n,{cancelToken:D.token}).then(function(e){if(200!==Number(e.data.cod))throw new Error(e.data.message);var n=e.data.list.map(function(e){return{ts:e.dt,code:e.weather[0].id,group:C(e.weather[0].id),description:e.weather[0].main,maxTemp:e.temp.max,minTemp:e.temp.min}});return n.shift(),{unit:t,list:n}}).catch(function(e){if(!A.a.isCancel(e))throw e;console.error(e.message,e)})}(e,t)}).then(function(e){var t=e.list;n(function(e){return{type:"@FORECAST/END_GET_FORECAST",list:e}}(t))}).catch(function(e){console.error("Error getting forecast",e),n({type:"@FORECAST/RESET_FORECAST"}),n({type:"@MASKING/UNMASK_BG"})});return Promise.all([o,c]).then(function(){n(function(e){return{type:"@UNIT/SET_UNIT",unit:e}}(t)),n({type:"@MASKING/UNMASK_BG"})})}},W=function(e,t){return new Promise(function(n,a){""!==e?n(e):function(e){return new Promise(function(t,n){navigator.geolocation.getCurrentPosition(function(e){var n={lat:e.coords.latitude,lon:e.coords.longitude};t(n)},function(){t(e().location)})})}(t).then(function(e){return function(e){var t="".concat(M,"&latlng=").concat(e.lat,",").concat(e.lon,"&result_type=administrative_area_level_3");return console.log("Making request to ".concat(t)),A.a.get(t,{cancelToken:G.token}).then(function(e){if(e.data.error_message)throw new Error(e.data.error_message);return e.data.results[0].formatted_address}).catch(function(e){if(!A.a.isCancel(e))throw e;console.error(e.message,e)})}(e)}).then(function(e){n(e)})})},H=(n(82),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleFormToggle=function(){n.props.dispatch(L())},n.handleInputChange=function(e){n.props.dispatch(F(e.target.value))},n.handleMetricUnit=function(e){n.props.dispatch(I("metric"))},n.handleImperialUnit=function(e){n.props.dispatch(I("imperial"))},n.handleSubmit=function(e){e.preventDefault(),n.inputEl.blur();var t=n.props,a=t.inputValue,r=t.address,o=t.unit,c=t.dispatch;a&&a.trim()?(c(n.props.submitAction(a,o)),n.handleFormToggle()):c(F(r))},n.handleTempToggle=function(e){n.props.dispatch(U())},n.inputEl=null,n}return Object(h.a)(t,e),Object(d.a)(t,null,[{key:"getUnitString",value:function(e){return"metric"===e?"C":"F"}}]),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(I(this.props.defaultUnit))}},{key:"render",value:function(){var e=this,n=this.props,a=n.inputValue,o=n.formToggle,c=n.tempToggle,i=n.unit,s=n.address,l=o?"form":"";return r.a.createElement("div",{className:"weather-form ".concat(l)},o?r.a.createElement(O.a,{className:"form-inline justify-content-center",onSubmit:this.handleSubmit},r.a.createElement(T.a,{type:"text",name:"address",innerRef:function(t){e.inputEl=t},value:a,onChange:this.handleInputChange}),"\xa0",r.a.createElement(v.a,{type:"buttom",isOpen:c,toggle:this.handleTempToggle},r.a.createElement(b.a,{type:"button",caret:!0,color:"secondary"},"\xba ",t.getUnitString(i)),r.a.createElement(N.a,null,r.a.createElement(_.a,{type:"button",onClick:this.handleMetricUnit},"\xba C"),r.a.createElement(_.a,{type:"button",onClick:this.handleImperialUnit},"\xba F"))),"\xa0",r.a.createElement(y.a,{color:"info"},"Check")):r.a.createElement(y.a,{className:"btn-form",outline:!0,color:"light",onClick:this.handleFormToggle},r.a.createElement("i",{className:"fa fa-map-marker","aria-hidden":"true"}),"\xa0\xa0",s))}}]),t}(r.a.Component)),P=Object(l.b)(function(e){return e.weatherForm})(H),V=(n(87),function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(x(this.props.inputValue,this.props.unit))}},{key:"componentWillUnmount",value:function(){this.props.currentWeatherLoading&&S.cancel("Current weather request canceled"),this.props.forecastLoading&&D.cancel("Forecast request canceled")}},{key:"render",value:function(){var e=this.props,t=e.address,n=e.group,a=e.description,o=e.temp,c=e.list,i=e.unit,s=e.masking,l=c;return document.body.className="weather-bg ".concat(n),document.querySelector(".weather-bg .mask").className="mask ".concat(s?"masking":""),r.a.createElement("div",{className:"weather"},r.a.createElement("div",{className:"current"},r.a.createElement(P,{address:t,defaultUnit:i,submitAction:x}),r.a.createElement(E,Object.assign({group:n,description:a,temp:o,unit:i,masking:s},{day:"today"}))),r.a.createElement("div",{className:"forecast"},r.a.createElement(g,{list:l,unit:i,masking:s})))}}]),t}(r.a.Component)),q=Object(l.b)(function(e){return Object(f.a)({},e.currentWeather,e.forecast,{inputValue:e.weatherForm.inputValue,unit:e.unit,address:e.address,masking:e.masking})})(V),K=n(110),B=n(112),z="http://localhost:3000/api/todos",J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t="".concat(z,"?mode=");return t+="active"===e?"active":"completed"===e?"completed":"all",console.log("Making GET request to: ".concat(t)),A.a.get(t).then(function(e){if(200!==e.status)throw new Error("Unexpected response code: ".concat(e.status));return e.data})},X=function(e){var t=z;return console.log("Making POST request to: ".concat(t)),A.a.post(t,{text:e}).then(function(e){if(200!==e.status)throw new Error("Unexpected response code: ".concat(e.status));return e.data})},Q=function(e){var t="".concat(z,"/").concat(e);return console.log("Making POST request to: ".concat(t)),A.a.post(t).then(function(e){if(200!==e.status)throw new Error("Unexpected response code: ".concat(e.status));return e.data})};function Z(e){return{type:"@TODO_FORM/INPUT",value:e}}function Y(e){return{type:"@TODO_FORM/INPUT_DANGER",danger:e}}function $(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){return e||t({type:"@TODO/START_LOADING"}),J(n().todo.filterMode).then(function(e){t(function(e){return{type:"@TODO/END_LIST_TODOS",todos:e}}(e))}).catch(function(e){console.error("Error listing todos",e)}).then(function(){t({type:"@TODO/END_LOADING"})})}}var ee=function(e){return function(t){return t({type:"@TODO/START_LOADING"}),function(e){var t="".concat(z,"/").concat(e);return console.log("Making DELETE request to: ".concat(t)),A.a.delete(t).then(function(e){if(200!==e.status)throw new Error("Unexpected response code: ".concat(e.status));return e.data})}(e).then(function(){t($(!0))}).catch(function(e){console.error("Error removing todos",e)})}};n(88);var te=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target.value;n.props.dispatch(Z(t)),t&&n.props.inputDanger&&n.props.dispatch(Y(!1))},n.handlePost=function(){var e,t=n.props,a=t.inputValue,r=t.dispatch;a?(r((e=a,function(t){return t({type:"@TODO/START_LOADING"}),X(e).then(function(){t($(!0))}).catch(function(e){console.error("Error creating todos",e)})})),r(Z(""))):r(Y(!0))},n.inputEl=null,n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.inputValue,n=this.props.inputDanger?"has-danger":"";return r.a.createElement("div",{className:"post-form"},r.a.createElement(B.a,{color:"info",className:"d-flex flex-column flex-sm-row justify-content-center ".concat(n)},r.a.createElement(T.a,{className:"input",type:"textarea",innerRef:function(t){e.inputEl=t},value:t,onChange:this.handleInputChange,placeholder:"What's next to do?"}),r.a.createElement(y.a,{className:"btn-post align-self-end",color:"info",onClick:this.handlePost},"Add")))}}]),t}(r.a.Component),ne=Object(l.b)(function(e){return Object(f.a)({},e.todoForm)})(te),ae=n(108),re=n(109),oe=n(34),ce=n.n(oe),ie=(n(97),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleCheckboxCheck=function(e){var t;n.props.dispatch((t=n.props.id,function(e){return e({type:"@TODO/START_LOADING"}),Q(t).then(function(){e($(!0))}).catch(function(e){console.error("Error accomplishing todos",e)})}))},n.handleRemove=function(e){n.props.dispatch(ee(n.props.id))},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.ts,a=e.doneTs;return r.a.createElement("div",{className:"todo-item d-flex flex-row "+(a?"done":"undone")},r.a.createElement("div",{className:"remove",onClick:this.handleRemove},r.a.createElement("i",{className:"far fa-times-circle"})),r.a.createElement("div",{className:"todo d-flex flex-column",onClick:this.handleCheckboxCheck},r.a.createElement("div",{className:"wrap"},r.a.createElement("div",{className:"ts"},"Created: "+ce()(1e3*n).calendar()),r.a.createElement("div",{className:"text"},t)),r.a.createElement("div",{className:"check d-flex justify-content-end align-items-center"},r.a.createElement("div",{className:"done-ts"},!!a&&r.a.createElement("span",null,ce()(1e3*a).calendar())),r.a.createElement("div",{className:"checkbox"},r.a.createElement("i",{className:"far "+(a?"fa-check-square":"fa-square")})))))}}]),t}(r.a.Component)),se=Object(l.b)()(ie),le=(n(98),function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.todos,t=r.a.createElement(ae.a,{className:"empty d-flex justify-content-center align-items-center"},r.a.createElement("div",{className:"empty-text"},"There are no other todos."));return e.length&&(t=e.map(function(e){return r.a.createElement(ae.a,{key:e.id,action:!0},r.a.createElement(se,e))})),r.a.createElement("div",{className:"todo-list"},r.a.createElement(re.a,null,t))}}]),t}(r.a.Component)),ue=Object(l.b)()(le),de=(n(99),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).toggleAll=function(){n.props.dispatch(function(e){return e({type:"@TODO/TOGGLE_ALL"}),e($())})},n.toggleActive=function(){n.props.dispatch(function(e){return e({type:"@TODO/TOGGLE_ACTIVE"}),e($())})},n.toggleComleted=function(){n.props.dispatch(function(e){return e({type:"@TODO/TOGGLE_COMPLETED"}),e($())})},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch($())}},{key:"render",value:function(){var e=this.props,t=e.todoLoading,n=e.todos,a=e.filterMode;return r.a.createElement("div",{className:"todos d-flex flex-column"},r.a.createElement("div",{className:"label d-flex justify-content-between align-items-end"},r.a.createElement("h4",null,r.a.createElement("i",{className:"fa fa-tags","aria-hidden":"true"}),"\xa0\xa0TODOS"),r.a.createElement(K.a,{size:"sm"},r.a.createElement(y.a,{outline:"all"!==a,color:"light",onClick:this.toggleAll},"All"),r.a.createElement(y.a,{outline:"active"!==a,color:"light",onClick:this.toggleActive},"Active"),r.a.createElement(y.a,{outline:"completed"!==a,color:"light",onClick:this.toggleComleted},"Completed"))),r.a.createElement(ne,null),r.a.createElement(ue,{todos:n}),t&&r.a.createElement("i",{className:"fas fa-spinner fa-spin loading"}))}}]),t}(r.a.Component)),pe=Object(l.b)(function(e){return Object(f.a)({},e.todo)})(de),me=(n(100),function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"main"},r.a.createElement(q,null),r.a.createElement(pe,null))}}]),t}(r.a.Component)),he=Object(l.b)()(me),fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"metric",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@UNIT/SET_UNIT":return t.unit;default:return e}},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@ADDRESS/SET_ADDRESS":return t.address;default:return e}},ge={lat:25.0173405,lon:121.5397518},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@LOACTION/SET_LOCATION":return t.location;default:return e}},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"@MASKING/MASK_BG":return!0;case"@MASKING/UNMASK_BG":return!1;default:return e}},ve={code:-1,group:"na",description:"N/A",temp:NaN,currentWeatherLoading:!1},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@CURRENT_WEATHER/START_GET_CURRENT_WEATHER":return Object(f.a)({},e,{currentWeatherLoading:!0});case"@CURRENT_WEATHER/END_GET_CURRENT_WEATHER":return Object(f.a)({},e,{code:t.code,group:t.group,description:t.description,temp:t.temp,currentWeatherLoading:!1});case"@CURRENT_WEATHER/RESET_CURRENT_WEATHER":return Object(f.a)({},ve);default:return e}},Ne={inputValue:"",formToggle:!1,tempToggle:!1,unit:null},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@WEATHER_FORM/TOGGLE_FORM":return Object(f.a)({},e,{formToggle:!e.formToggle});case"@WEATHER_FORM/INPUT":return Object(f.a)({},e,{inputValue:t.value});case"@WEATHER_FORM/TOGGLE_TEMP":return Object(f.a)({},e,{tempToggle:!e.tempToggle});case"@WEATHER_FORM/SELECT_UNIT":return Object(f.a)({},e,{unit:t.unit});default:return e}},ye=function(){for(var e=[],t=0;t<5;t++)e[t]={ts:-t,code:-1,group:"na",description:"N/A",maxTemp:NaN,minTemp:NaN};return{list:e,forecastLoading:!1}},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@FORECAST/START_GET_FORECAST":return Object(f.a)({},e,{forecastLoading:!0});case"@FORECAST/END_GET_FORECAST":return Object(f.a)({},e,{list:t.list,forecastLoading:!1});case"@FORECAST/RESET_FORECAST":return Object(f.a)({},ye());default:return e}},Ae={inputValue:"",inputDanger:!1};function je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@TODO_FORM/INPUT":return Object(f.a)({},e,{inputValue:t.value});case"@TODO_FORM/INPUT_DANGER":return Object(f.a)({},e,{inputDanger:t.danger});default:return e}}var Ce={todoLoading:!1,todos:[],filterMode:"all"};function we(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@TODO/START_LOADING":return Object(f.a)({},e,{todoLoading:!0});case"@TODO/END_LOADING":return Object(f.a)({},e,{todoLoading:!1});case"@TODO/END_LIST_TODOS":return Object(f.a)({},e,{todos:t.todos});case"@TODO/TOGGLE_ALL":return Object(f.a)({},e,{filterMode:"all"});case"@TODO/TOGGLE_ACTIVE":return Object(f.a)({},e,{filterMode:"active"});case"@TODO/TOGGLE_COMPLETED":return Object(f.a)({},e,{filterMode:"completed"});default:return e}}n(101);window.onload=function(){var e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,t=Object(i.e)(Object(i.c)({unit:fe,address:Ee,location:Oe,masking:Te,currentWeather:be,weatherForm:_e,forecast:Re,todoForm:je,todo:we}),e(Object(i.a)(s.a)));c.a.render(r.a.createElement(l.a,{store:t},r.a.createElement(he,null)),document.getElementById("root"))}},52:function(e,t,n){e.exports=n(102)},61:function(e,t,n){},62:function(e,t,n){},82:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[52,1,2]]]);
//# sourceMappingURL=main.9aef06c4.chunk.js.map